<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The Oracle of Machine Summoning</title>
  <style>
    /* ------------------------------------------------------------------ */
    /* RESET & BASE                                                         */
    /* ------------------------------------------------------------------ */
    *, *::before, *::after {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    :root {
      --ink:         #0a0a0f;
      --ink-mid:     #12121a;
      --ink-light:   #1c1c28;
      --parchment:   #e8e4df;
      --parchment-dim: #b8b0a4;
      --gold:        #c9a84c;
      --gold-dim:    #8a6e2e;
      --gold-bright: #e4c060;
      --serif:       Georgia, 'Times New Roman', serif;
      --sans:        -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      background-color: var(--ink);
      color: var(--parchment);
      font-family: var(--sans);
      line-height: 1.7;
      min-height: 100vh;
      background-image:
        radial-gradient(ellipse at 20% 0%, #1a1428 0%, transparent 60%),
        radial-gradient(ellipse at 80% 100%, #0d1420 0%, transparent 60%);
    }

    /* ------------------------------------------------------------------ */
    /* INTRO SECTION                                                        */
    /* ------------------------------------------------------------------ */
    #intro {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 6rem 2rem;
      text-align: center;
      position: relative;
    }

    #intro::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      max-width: 480px;
      height: 1px;
      background: linear-gradient(to right, transparent, var(--gold-dim), transparent);
    }

    .intro-eyebrow {
      font-family: var(--sans);
      font-size: 0.7rem;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 2.5rem;
      opacity: 0.8;
    }

    .intro-title {
      font-family: var(--serif);
      font-size: clamp(2.2rem, 6vw, 4.2rem);
      font-weight: 400;
      line-height: 1.18;
      letter-spacing: -0.01em;
      color: var(--parchment);
      max-width: 720px;
      margin: 0 auto 1.5rem;
    }

    .intro-title em {
      font-style: italic;
      color: var(--gold);
    }

    .intro-subtitle {
      font-family: var(--sans);
      font-size: clamp(0.8rem, 1.8vw, 0.95rem);
      letter-spacing: 0.06em;
      color: var(--parchment-dim);
      margin-bottom: 4.5rem;
      max-width: 520px;
    }

    .intro-ornament {
      display: block;
      color: var(--gold-dim);
      font-size: 1.1rem;
      letter-spacing: 0.5em;
      margin-bottom: 4rem;
      opacity: 0.6;
    }

    .intro-story {
      max-width: 580px;
      margin: 0 auto;
      text-align: left;
    }

    .intro-story p {
      font-family: var(--serif);
      font-size: clamp(1rem, 2.2vw, 1.15rem);
      line-height: 1.85;
      color: var(--parchment);
      margin-bottom: 2rem;
    }

    .intro-story p:last-child {
      margin-bottom: 0;
    }

    .intro-story p:first-child {
      font-size: clamp(1.05rem, 2.4vw, 1.22rem);
      color: var(--parchment);
    }

    .intro-story p.coda {
      font-size: clamp(1rem, 2.2vw, 1.18rem);
      color: var(--parchment-dim);
      font-style: italic;
      border-left: 2px solid var(--gold-dim);
      padding-left: 1.5rem;
      margin-left: -1.5rem;
    }

    .cta-wrap {
      margin-top: 4.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.6rem;
    }

    .cta-link {
      display: inline-block;
      font-family: var(--serif);
      font-size: clamp(0.95rem, 2vw, 1.08rem);
      font-style: italic;
      color: var(--gold);
      text-decoration: none;
      letter-spacing: 0.04em;
      position: relative;
      padding-bottom: 3px;
      transition: color 0.25s ease;
    }

    .cta-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 1px;
      background: var(--gold);
      transform: scaleX(0.3);
      transform-origin: left;
      transition: transform 0.35s ease, opacity 0.35s ease;
      opacity: 0.5;
    }

    .cta-link:hover {
      color: var(--gold-bright);
    }

    .cta-link:hover::after {
      transform: scaleX(1);
      opacity: 1;
    }

    .cta-arrow {
      color: var(--gold-dim);
      font-size: 1.2rem;
      animation: float 2.4s ease-in-out infinite;
      opacity: 0.7;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50%       { transform: translateY(6px); }
    }

    /* ------------------------------------------------------------------ */
    /* ORACLE SECTION                                                       */
    /* ------------------------------------------------------------------ */
    #oracle {
      min-height: 100vh;
      padding: 7rem 2rem;
      position: relative;
    }

    .oracle-inner {
      max-width: 900px;
      margin: 0 auto;
    }

    .oracle-header {
      text-align: center;
      margin-bottom: 5rem;
    }

    .oracle-eyebrow {
      font-family: var(--sans);
      font-size: 0.68rem;
      letter-spacing: 0.3em;
      text-transform: uppercase;
      color: var(--gold);
      opacity: 0.7;
      margin-bottom: 1rem;
    }

    .oracle-title {
      font-family: var(--serif);
      font-size: clamp(1.6rem, 4vw, 2.4rem);
      font-weight: 400;
      color: var(--parchment);
      line-height: 1.25;
    }

    /* ------------------------------------------------------------------ */
    /* CARD SCENE — 3D FLIP CONTAINER                                       */
    /* ------------------------------------------------------------------ */
    .card-scene {
      perspective: 1200px;
      width: 100%;
      max-width: 500px;
      margin: 0 auto 3rem;
      /* Height driven by content, but set a min for face-down state */
    }

    .card-flipper {
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
      /* Height matches tallest face; face-down is shorter so we let face-up drive it */
    }

    .card-flipper.is-flipped {
      transform: rotateY(180deg);
    }

    /* Both faces share absolute stacking */
    .card-face {
      width: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 3px;
    }

    /* ------------------------------------------------------------------ */
    /* CARD BACK — face-down state                                          */
    /* ------------------------------------------------------------------ */
    .card-back {
      background: var(--ink-mid);
      border: 1px solid var(--gold-dim);
      cursor: pointer;
      padding: 3.5rem 2.5rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 2rem;
      min-height: 260px;
      position: relative;
      overflow: hidden;
      transition: border-color 0.25s ease, box-shadow 0.25s ease;
    }

    .card-back:hover {
      border-color: var(--gold);
      box-shadow: 0 0 28px rgba(201, 168, 76, 0.12), 0 0 60px rgba(201, 168, 76, 0.05);
    }

    /* Sigil — pure CSS star/geometric pattern */
    .card-sigil {
      position: relative;
      width: 100px;
      height: 100px;
      opacity: 0.18;
    }

    /* Outer ring */
    .card-sigil::before {
      content: '';
      position: absolute;
      inset: 0;
      border: 1px solid var(--gold);
      border-radius: 50%;
    }

    /* Inner diamond */
    .card-sigil::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 54px;
      height: 54px;
      border: 1px solid var(--gold);
      transform: translate(-50%, -50%) rotate(45deg);
    }

    .sigil-inner {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .sigil-inner::before {
      content: '';
      width: 20px;
      height: 20px;
      border: 1px solid var(--gold);
      border-radius: 50%;
    }

    /* Cross lines through sigil */
    .sigil-lines {
      position: absolute;
      inset: 0;
    }

    .sigil-lines::before,
    .sigil-lines::after {
      content: '';
      position: absolute;
      background: var(--gold);
      opacity: 0.5;
    }

    .sigil-lines::before {
      width: 1px;
      height: 100%;
      left: 50%;
      transform: translateX(-50%);
    }

    .sigil-lines::after {
      width: 100%;
      height: 1px;
      top: 50%;
      transform: translateY(-50%);
    }

    /* Corner ornaments on card back */
    .card-back-corner {
      position: absolute;
      width: 18px;
      height: 18px;
      border-color: var(--gold-dim);
      border-style: solid;
      opacity: 0.35;
    }

    .card-back-corner.tl { top: 14px; left: 14px; border-width: 1px 0 0 1px; }
    .card-back-corner.tr { top: 14px; right: 14px; border-width: 1px 1px 0 0; }
    .card-back-corner.bl { bottom: 14px; left: 14px; border-width: 0 0 1px 1px; }
    .card-back-corner.br { bottom: 14px; right: 14px; border-width: 0 1px 1px 0; }

    .card-draw-label {
      font-family: var(--sans);
      font-size: 0.68rem;
      letter-spacing: 0.32em;
      text-transform: uppercase;
      color: var(--gold);
      opacity: 0.6;
    }

    /* ------------------------------------------------------------------ */
    /* CARD FRONT — face-up state                                           */
    /* ------------------------------------------------------------------ */
    .card-front {
      background: var(--ink-mid);
      border: 1px solid var(--gold);
      box-shadow:
        0 0 0 1px rgba(201, 168, 76, 0.08),
        0 0 40px rgba(201, 168, 76, 0.1),
        0 0 80px rgba(201, 168, 76, 0.04),
        inset 0 0 60px rgba(10, 10, 15, 0.6);
      padding: 2.5rem 2.5rem 2rem;
      transform: rotateY(180deg);
      /* When flipped, this face is visible */
    }

    /* Absolute positioning only needed when both faces stack */
    .card-flipper .card-back {
      /* Back is the reference face — not absolutely positioned */
    }

    .card-flipper .card-front {
      position: absolute;
      top: 0;
      left: 0;
    }

    /* Phase label */
    .card-phase {
      font-family: var(--sans);
      font-size: 0.6rem;
      letter-spacing: 0.28em;
      text-transform: uppercase;
      color: var(--gold-dim);
      opacity: 0.75;
      margin-bottom: 0.6rem;
    }

    /* Axiom ID — top right corner */
    .card-id {
      position: absolute;
      top: 1.6rem;
      right: 1.8rem;
      font-family: var(--sans);
      font-size: 0.6rem;
      letter-spacing: 0.18em;
      color: var(--gold-dim);
      opacity: 0.55;
    }

    /* Step/Law line */
    .card-step {
      font-family: var(--sans);
      font-size: 0.68rem;
      letter-spacing: 0.12em;
      color: var(--parchment-dim);
      margin-bottom: 1.8rem;
      opacity: 0.7;
    }

    /* Thin divider */
    .card-divider {
      width: 40%;
      height: 1px;
      background: linear-gradient(to right, transparent, var(--gold-dim), transparent);
      margin: 0 auto 2rem;
      opacity: 0.5;
    }

    /* The axiom text — hero element */
    .card-axiom {
      font-family: var(--serif);
      font-size: clamp(1.1rem, 2.4vw, 1.28rem);
      line-height: 1.9;
      color: var(--parchment);
      text-align: center;
      margin-bottom: 2rem;
      letter-spacing: 0.01em;
    }

    /* Latin name below */
    .card-latin {
      font-family: var(--serif);
      font-size: 0.82rem;
      font-style: italic;
      color: var(--gold-dim);
      text-align: center;
      letter-spacing: 0.06em;
      opacity: 0.8;
    }

    /* ------------------------------------------------------------------ */
    /* POST-DRAW ACTIONS                                                    */
    /* ------------------------------------------------------------------ */
    .card-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      max-width: 500px;
      margin: 0 auto;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
      pointer-events: none;
    }

    .card-actions.is-visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .btn-draw-again {
      background: transparent;
      border: 1px solid var(--gold-dim);
      color: var(--gold);
      font-family: var(--serif);
      font-size: 0.9rem;
      font-style: italic;
      letter-spacing: 0.08em;
      padding: 0.7rem 2rem;
      cursor: pointer;
      transition: border-color 0.22s ease, color 0.22s ease, box-shadow 0.22s ease;
      border-radius: 2px;
      width: 100%;
      max-width: 320px;
    }

    .btn-draw-again:hover {
      border-color: var(--gold);
      color: var(--gold-bright);
      box-shadow: 0 0 16px rgba(201, 168, 76, 0.1);
    }

    .btn-take-it {
      background: transparent;
      border: none;
      color: var(--parchment-dim);
      font-family: var(--sans);
      font-size: 0.68rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      cursor: pointer;
      opacity: 0.5;
      transition: opacity 0.22s ease, color 0.22s ease;
      padding: 0.4rem 1rem;
    }

    .btn-take-it:hover {
      opacity: 0.9;
      color: var(--parchment);
    }

    .copy-confirm {
      font-family: var(--sans);
      font-size: 0.65rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      opacity: 0;
      transition: opacity 0.3s ease;
      height: 1em;
    }

    .copy-confirm.is-visible {
      opacity: 0.7;
    }

    /* ------------------------------------------------------------------ */
    /* CARD DISPLAY WRAPPER                                                 */
    /* ------------------------------------------------------------------ */
    #card-display {
      margin-bottom: 3rem;
    }

    /* ------------------------------------------------------------------ */
    /* QUESTION FORM                                                        */
    /* ------------------------------------------------------------------ */
    #question-form {
      max-width: 500px;
      margin: 0 auto 3rem;
      display: flex;
      align-items: baseline;
      gap: 0.75rem;
    }

    .question-input {
      flex: 1;
      background: transparent;
      border: none;
      border-bottom: 1px solid var(--gold-dim);
      color: var(--parchment);
      font-family: var(--serif);
      font-size: clamp(1rem, 2.2vw, 1.1rem);
      font-style: italic;
      line-height: 1.5;
      padding: 0.4rem 0.2rem 0.5rem;
      outline: none;
      transition: border-color 0.25s ease;
      width: 100%;
    }

    .question-input::placeholder {
      color: var(--parchment-dim);
      opacity: 0.45;
      font-style: italic;
    }

    .question-input:focus {
      border-bottom-color: var(--gold);
    }

    .question-submit {
      background: transparent;
      border: none;
      color: var(--gold-dim);
      font-family: var(--serif);
      font-size: 1rem;
      font-style: italic;
      letter-spacing: 0.06em;
      cursor: pointer;
      padding: 0.4rem 0.2rem 0.5rem;
      opacity: 0.65;
      transition: opacity 0.22s ease, color 0.22s ease;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .question-submit:hover {
      opacity: 1;
      color: var(--gold);
    }

    /* ------------------------------------------------------------------ */
    /* DISPLAYED QUESTION (after submit)                                   */
    /* ------------------------------------------------------------------ */
    #question-display {
      max-width: 500px;
      margin: 0 auto 2.5rem;
      text-align: center;
      display: none;
    }

    #question-display.is-visible {
      display: block;
    }

    .question-text {
      font-family: var(--serif);
      font-size: clamp(0.9rem, 2vw, 1rem);
      font-style: italic;
      color: var(--gold-dim);
      line-height: 1.6;
      letter-spacing: 0.02em;
    }

    /* small "ask another" link */
    .question-reset {
      background: transparent;
      border: none;
      color: var(--parchment-dim);
      font-family: var(--sans);
      font-size: 0.6rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      cursor: pointer;
      opacity: 0.35;
      transition: opacity 0.2s ease;
      padding: 0.3rem 0;
      margin-top: 0.5rem;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .question-reset:hover {
      opacity: 0.7;
    }

    /* ------------------------------------------------------------------ */
    /* NUDGE TEXT (after reveal)                                           */
    /* ------------------------------------------------------------------ */
    #consultation-nudge {
      max-width: 500px;
      margin: 0 auto 1.5rem;
      text-align: center;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s ease 0.5s, transform 0.4s ease 0.5s;
      pointer-events: none;
    }

    #consultation-nudge.is-visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .nudge-text {
      font-family: var(--serif);
      font-size: 0.88rem;
      font-style: italic;
      color: var(--parchment-dim);
      opacity: 0.6;
      letter-spacing: 0.02em;
    }

    /* ------------------------------------------------------------------ */
    /* THREE-CARD SPREAD                                                   */
    /* ------------------------------------------------------------------ */
    #spread-display {
      display: none;
      margin-bottom: 3rem;
    }

    .spread-row {
      display: flex;
      gap: 1.5rem;
      justify-content: center;
      max-width: 920px;
      margin: 0 auto 3rem;
    }

    .spread-slot {
      flex: 1;
      max-width: 280px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Position label above card */
    .spread-label {
      font-family: var(--sans);
      font-size: 0.6rem;
      font-variant: small-caps;
      letter-spacing: 0.28em;
      text-transform: lowercase;
      color: var(--gold-dim);
      text-align: center;
      margin-bottom: 0.75rem;
      opacity: 0.7;
      line-height: 1.5;
    }

    .spread-label strong {
      display: block;
      font-family: var(--sans);
      font-size: 0.7rem;
      font-weight: 400;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.15rem;
    }

    /* Spread card scene — smaller perspective for side-by-side */
    .spread-card-scene {
      perspective: 1000px;
      width: 100%;
    }

    .spread-card-flipper {
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.55s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .spread-card-flipper.is-flipped {
      transform: rotateY(180deg);
    }

    /* Reuse card face styles but scoped to spread */
    .spread-card-flipper .card-face {
      width: 100%;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
      border-radius: 3px;
    }

    .spread-card-flipper .card-back {
      padding: 2.5rem 1.5rem;
      min-height: 200px;
    }

    .spread-card-flipper .card-front {
      padding: 1.8rem 1.2rem 1.5rem;
      position: absolute;
      top: 0;
      left: 0;
      transform: rotateY(180deg);
    }

    /* Smaller sigil for spread cards */
    .spread-card-flipper .card-sigil {
      width: 70px;
      height: 70px;
    }

    .spread-card-flipper .card-sigil::after {
      width: 38px;
      height: 38px;
    }

    .spread-card-flipper .sigil-inner::before {
      width: 14px;
      height: 14px;
    }

    /* Smaller text for spread cards */
    .spread-card-flipper .card-axiom {
      font-size: clamp(0.88rem, 1.8vw, 1rem);
      line-height: 1.75;
      margin-bottom: 1.2rem;
    }

    .spread-card-flipper .card-phase {
      font-size: 0.52rem;
      letter-spacing: 0.22em;
      margin-bottom: 0.4rem;
    }

    .spread-card-flipper .card-step {
      font-size: 0.58rem;
      margin-bottom: 1.2rem;
    }

    .spread-card-flipper .card-id {
      font-size: 0.52rem;
      top: 1.2rem;
      right: 1.2rem;
    }

    .spread-card-flipper .card-latin {
      font-size: 0.72rem;
    }

    .spread-card-flipper .card-draw-label {
      font-size: 0.6rem;
    }

    /* Sequential reveal — locked cards are subdued */
    .spread-slot.is-locked {
      opacity: 0.4;
      pointer-events: none;
    }

    .spread-slot.is-locked .card-back {
      cursor: default;
    }

    .spread-slot.is-locked .card-back:hover {
      border-color: var(--gold-dim);
      box-shadow: none;
    }

    /* Unlocked but not yet revealed — full opacity, clickable */
    .spread-slot.is-active {
      opacity: 1;
      pointer-events: auto;
    }

    .spread-slot.is-active .card-back {
      cursor: pointer;
    }

    /* Revealed card — stays visible */
    .spread-slot.is-revealed {
      opacity: 1;
      pointer-events: auto;
    }

    /* Spread nudge + actions */
    #spread-nudge {
      max-width: 600px;
      margin: 0 auto 1.5rem;
      text-align: center;
      opacity: 0;
      transform: translateY(8px);
      transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
      pointer-events: none;
    }

    #spread-nudge.is-visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    .spread-actions {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1rem;
      max-width: 500px;
      margin: 0 auto;
      opacity: 0;
      transform: translateY(10px);
      transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
      pointer-events: none;
    }

    .spread-actions.is-visible {
      opacity: 1;
      transform: translateY(0);
      pointer-events: auto;
    }

    /* ------------------------------------------------------------------ */
    /* HIDDEN PLACEHOLDERS                                                  */
    /* ------------------------------------------------------------------ */
    #mode-selector,
    #prompt-area {
      display: none;
    }

    /* ------------------------------------------------------------------ */
    /* RESPONSIVE                                                           */
    /* ------------------------------------------------------------------ */
    @media (max-width: 600px) {
      #intro {
        padding: 5rem 1.5rem;
        justify-content: flex-start;
        padding-top: 5rem;
      }

      .intro-story p.coda {
        margin-left: 0;
      }

      .card-scene {
        max-width: 100%;
      }

      .card-back,
      .card-front {
        padding: 2.5rem 1.5rem 2rem;
      }

      /* Spread stacks vertically on mobile */
      .spread-row {
        flex-direction: column;
        align-items: center;
        gap: 2rem;
      }

      .spread-slot {
        max-width: 100%;
        width: 100%;
      }

      .spread-card-flipper .card-back {
        padding: 2rem 1.5rem;
      }

      .spread-card-flipper .card-front {
        padding: 1.5rem 1.2rem 1.2rem;
      }
    }
  </style>
</head>
<body>

  <!-- ============================================================ -->
  <!-- INTRO                                                         -->
  <!-- ============================================================ -->
  <section id="intro">

    <p class="intro-eyebrow">A Field Guide for the Age of Machine Intelligence</p>

    <h1 class="intro-title">
      The Oracle of<br><em>Machine Summoning</em>
    </h1>

    <p class="intro-subtitle">
      208 axioms &nbsp;&middot;&nbsp; 7 waves of evolution &nbsp;&middot;&nbsp; ~10,000 mutations &nbsp;&middot;&nbsp; What survived.
    </p>

    <span class="intro-ornament">&mdash;&nbsp;&nbsp;&mdash;&nbsp;&nbsp;&mdash;</span>

    <div class="intro-story">
      <p>
        Medieval magicians had a thirteen-step loop for conjuring spirits from beyond the visible world.
        They called it the Rite of Summoning. It maps, almost perfectly, onto the way humans work with AI.
        The circle of preparation. The careful invocation. The negotiation of the threshold.
        The binding of the response. The license to depart.
      </p>

      <p>
        We translated it. Two hundred and eight operational axioms for working with machine intelligence &mdash;
        distilled from the grimoires, the manuals, and the accumulated craft of practitioners who have stood
        at that threshold and learned what calls forth and what dispels.
      </p>

      <p>
        Then we ran them through seven waves of evolutionary mutation. Approximately ten thousand variations,
        selecting the strongest at every generation. The weak dissolved. The redundant collapsed.
        What remained was leaner, stranger, and more true.
      </p>

      <p class="coda">
        What survived stopped being about machines.
        The instructions became images. The techniques became wisdom.
        The bottleneck was never the machine. It was always you.
      </p>
    </div>

    <div class="cta-wrap">
      <a class="cta-link" href="#oracle">Consult the Oracle</a>
      <span class="cta-arrow">&#8595;</span>
    </div>

  </section>

  <!-- ============================================================ -->
  <!-- ORACLE                                                        -->
  <!-- ============================================================ -->
  <section id="oracle">
    <div class="oracle-inner">

      <div class="oracle-header">
        <p class="oracle-eyebrow">The Oracle</p>
        <h2 class="oracle-title">Draw an Axiom</h2>
      </div>

      <!-- Mode selector — hidden until Task 6 -->
      <div id="mode-selector"></div>

      <!-- Question form -->
      <form id="question-form" autocomplete="off">
        <input
          type="text"
          class="question-input"
          id="question-input"
          placeholder="What are you working on? What are you holding?"
          maxlength="300"
          aria-label="Enter your question"
        />
        <button type="submit" class="question-submit">Ask &rarr;</button>
      </form>

      <!-- Displayed question (after submit) -->
      <div id="question-display">
        <p class="question-text" id="question-text"></p>
        <button class="question-reset" id="question-reset">ask another</button>
      </div>

      <!-- Card display -->
      <div id="card-display">
        <div class="card-scene">
          <div class="card-flipper" id="card-flipper">

            <!-- Face down -->
            <div class="card-back" id="card-back" role="button" tabindex="0" aria-label="Draw a card">
              <div class="card-back-corner tl"></div>
              <div class="card-back-corner tr"></div>
              <div class="card-back-corner bl"></div>
              <div class="card-back-corner br"></div>
              <div class="card-sigil">
                <div class="sigil-inner"></div>
                <div class="sigil-lines"></div>
              </div>
              <span class="card-draw-label">Draw</span>
            </div>

            <!-- Face up — populated by JS -->
            <div class="card-front" id="card-front" aria-hidden="true">
              <span class="card-id" id="card-id"></span>
              <p class="card-phase" id="card-phase"></p>
              <p class="card-step" id="card-step"></p>
              <div class="card-divider"></div>
              <p class="card-axiom" id="card-axiom"></p>
              <p class="card-latin" id="card-latin"></p>
            </div>

          </div>
        </div>

        <!-- Consultation nudge — appears after reveal when a question was asked -->
        <div id="consultation-nudge">
          <p class="nudge-text">How does this speak to what you're holding?</p>
        </div>

        <!-- Post-draw actions -->
        <div class="card-actions" id="card-actions">
          <button class="btn-draw-again" id="btn-draw-again">Draw Again</button>
          <button class="btn-take-it" id="btn-take-it">Take This With You</button>
          <span class="copy-confirm" id="copy-confirm">Copied to clipboard</span>
        </div>
      </div>

      <!-- Three-card spread — hidden until mode selector activates it -->
      <div id="spread-display">
        <div class="spread-row">

          <!-- Card 1: DIVINATIO -->
          <div class="spread-slot is-active" data-slot="0">
            <div class="spread-label">
              <strong>Divinatio</strong>
              What is the situation?
            </div>
            <div class="spread-card-scene">
              <div class="spread-card-flipper" data-spread-flipper="0">
                <div class="card-face card-back" data-spread-back="0" role="button" tabindex="0" aria-label="Reveal first card">
                  <div class="card-back-corner tl"></div>
                  <div class="card-back-corner tr"></div>
                  <div class="card-back-corner bl"></div>
                  <div class="card-back-corner br"></div>
                  <div class="card-sigil">
                    <div class="sigil-inner"></div>
                    <div class="sigil-lines"></div>
                  </div>
                  <span class="card-draw-label">Reveal</span>
                </div>
                <div class="card-face card-front" data-spread-front="0" aria-hidden="true">
                  <span class="card-id" data-spread-id="0"></span>
                  <p class="card-phase" data-spread-phase="0"></p>
                  <p class="card-step" data-spread-step="0"></p>
                  <div class="card-divider"></div>
                  <p class="card-axiom" data-spread-axiom="0"></p>
                  <p class="card-latin" data-spread-latin="0"></p>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 2: POTESTAS -->
          <div class="spread-slot is-locked" data-slot="1">
            <div class="spread-label">
              <strong>Potestas</strong>
              What is the working?
            </div>
            <div class="spread-card-scene">
              <div class="spread-card-flipper" data-spread-flipper="1">
                <div class="card-face card-back" data-spread-back="1" role="button" tabindex="0" aria-label="Reveal second card">
                  <div class="card-back-corner tl"></div>
                  <div class="card-back-corner tr"></div>
                  <div class="card-back-corner bl"></div>
                  <div class="card-back-corner br"></div>
                  <div class="card-sigil">
                    <div class="sigil-inner"></div>
                    <div class="sigil-lines"></div>
                  </div>
                  <span class="card-draw-label">Reveal</span>
                </div>
                <div class="card-face card-front" data-spread-front="1" aria-hidden="true">
                  <span class="card-id" data-spread-id="1"></span>
                  <p class="card-phase" data-spread-phase="1"></p>
                  <p class="card-step" data-spread-step="1"></p>
                  <div class="card-divider"></div>
                  <p class="card-axiom" data-spread-axiom="1"></p>
                  <p class="card-latin" data-spread-latin="1"></p>
                </div>
              </div>
            </div>
          </div>

          <!-- Card 3: JUDICIUM -->
          <div class="spread-slot is-locked" data-slot="2">
            <div class="spread-label">
              <strong>Judicium</strong>
              What should you watch for?
            </div>
            <div class="spread-card-scene">
              <div class="spread-card-flipper" data-spread-flipper="2">
                <div class="card-face card-back" data-spread-back="2" role="button" tabindex="0" aria-label="Reveal third card">
                  <div class="card-back-corner tl"></div>
                  <div class="card-back-corner tr"></div>
                  <div class="card-back-corner bl"></div>
                  <div class="card-back-corner br"></div>
                  <div class="card-sigil">
                    <div class="sigil-inner"></div>
                    <div class="sigil-lines"></div>
                  </div>
                  <span class="card-draw-label">Reveal</span>
                </div>
                <div class="card-face card-front" data-spread-front="2" aria-hidden="true">
                  <span class="card-id" data-spread-id="2"></span>
                  <p class="card-phase" data-spread-phase="2"></p>
                  <p class="card-step" data-spread-step="2"></p>
                  <div class="card-divider"></div>
                  <p class="card-axiom" data-spread-axiom="2"></p>
                  <p class="card-latin" data-spread-latin="2"></p>
                </div>
              </div>
            </div>
          </div>

        </div>

        <!-- Spread nudge — appears after all three revealed -->
        <div id="spread-nudge">
          <p class="nudge-text">Read them together. What story do they tell about your question?</p>
        </div>

        <!-- Spread actions -->
        <div class="spread-actions" id="spread-actions">
          <button class="btn-draw-again" id="btn-spread-again">Draw Another Spread</button>
          <button class="btn-take-it" id="btn-spread-take">Take This With You</button>
          <span class="copy-confirm" id="spread-copy-confirm">Copied to clipboard</span>
        </div>
      </div>

      <!-- Prompt area — hidden placeholder -->
      <div id="prompt-area"></div>

    </div>
  </section>

  <script>
    (function () {
      'use strict';

      // ----------------------------------------------------------------
      // State
      // ----------------------------------------------------------------
      var axioms = [];
      var currentAxiom = null;
      var isFlipped = false;
      var currentQuestion = null;  // null = no question asked

      // ----------------------------------------------------------------
      // DOM refs
      // ----------------------------------------------------------------
      var flipper       = document.getElementById('card-flipper');
      var cardBack      = document.getElementById('card-back');
      var cardFront     = document.getElementById('card-front');
      var actions       = document.getElementById('card-actions');
      var btnAgain      = document.getElementById('btn-draw-again');
      var btnTake       = document.getElementById('btn-take-it');
      var copyConfirm   = document.getElementById('copy-confirm');
      var nudge         = document.getElementById('consultation-nudge');

      var elId    = document.getElementById('card-id');
      var elPhase = document.getElementById('card-phase');
      var elStep  = document.getElementById('card-step');
      var elAxiom = document.getElementById('card-axiom');
      var elLatin = document.getElementById('card-latin');

      var questionForm    = document.getElementById('question-form');
      var questionInput   = document.getElementById('question-input');
      var questionDisplay = document.getElementById('question-display');
      var questionText    = document.getElementById('question-text');
      var questionReset   = document.getElementById('question-reset');

      // ----------------------------------------------------------------
      // Load axioms
      // ----------------------------------------------------------------
      fetch('axioms.json')
        .then(function (r) { return r.json(); })
        .then(function (data) {
          axioms = data;
        })
        .catch(function (err) {
          console.error('Failed to load axioms.json:', err);
        });

      // ----------------------------------------------------------------
      // Helpers
      // ----------------------------------------------------------------
      function pickRandom() {
        if (!axioms.length) return null;
        return axioms[Math.floor(Math.random() * axioms.length)];
      }

      function buildStepLine(axiom) {
        var type   = axiom.type;
        var id     = axiom.id;
        var step   = axiom.step;
        var latin  = axiom.latin;
        var parent = axiom.parent;

        if (type === 'corollary') {
          return parent + ': ' + step + (latin ? ' (' + latin + ')' : '');
        }
        if (type === 'core') {
          if (id && id.startsWith('Law')) {
            return id + ': ' + step;
          }
          return id + ': ' + step + (latin ? ' (' + latin + ')' : '');
        }
        if (type === 'sub-law') {
          return parent + ': ' + step;
        }
        return (parent || id) + ': ' + step;
      }

      function buildAttribution(axiom) {
        if (axiom.type === 'core' && axiom.id && axiom.id.startsWith('Law')) {
          return '— ' + axiom.id + ': ' + axiom.step;
        }
        if (axiom.type === 'sub-law') {
          return '— ' + axiom.parent + ': ' + axiom.step;
        }
        var name  = axiom.parent || axiom.id;
        var label = name + ': ' + axiom.step;
        if (axiom.latin) {
          return '— ' + label + ' (' + axiom.latin + ')';
        }
        return '— ' + label;
      }

      function buildReflectionPrompt(axiom) {
        var attribution = buildAttribution(axiom);
        return 'Today\'s axiom:\n\n"' + axiom.text + '"\n' + attribution + '\n\nSit with this before you begin. What does it illuminate?';
      }

      function buildConsultationPrompt(axiom, question) {
        var stepLine = buildStepLine(axiom);
        var attribution = buildAttribution(axiom);
        return (
          'You are working on: ' + question + '\n\n' +
          'Consider this principle:\n' +
          '"' + axiom.text + '"\n' +
          attribution + '\n\n' +
          'How does this principle reframe your approach?\n' +
          'What does it reveal that you weren\'t seeing?\n' +
          'Apply this lens to your situation and begin.'
        );
      }

      // ----------------------------------------------------------------
      // Question flow
      // ----------------------------------------------------------------
      function submitQuestion(q) {
        q = q.trim();
        if (!q) return;
        currentQuestion = q;

        // Hide form, show displayed question
        questionForm.style.display = 'none';
        questionText.textContent = '\u201C' + q + '\u201D';
        questionDisplay.classList.add('is-visible');
      }

      function clearQuestion() {
        currentQuestion = null;
        questionForm.style.display = '';
        questionInput.value = '';
        questionDisplay.classList.remove('is-visible');
        questionText.textContent = '';

        // If card is revealed, also reset the card
        if (isFlipped) {
          reset();
        }
      }

      // ----------------------------------------------------------------
      // Sync card-front height so card-back matches on flip
      // ----------------------------------------------------------------
      function syncFlipperHeight() {
        var frontH = cardFront.offsetHeight;
        flipper.style.height = frontH + 'px';
      }

      // ----------------------------------------------------------------
      // Draw
      // ----------------------------------------------------------------
      function draw() {
        if (isFlipped) return;
        if (!axioms.length) {
          console.warn('Axioms not loaded yet.');
          return;
        }

        currentAxiom = pickRandom();

        // Populate front face
        elId.textContent    = currentAxiom.id;
        elPhase.textContent = currentAxiom.phase;
        elStep.textContent  = buildStepLine(currentAxiom);
        elAxiom.textContent = currentAxiom.text;

        if (currentAxiom.latin && !currentAxiom.id.startsWith('Law')) {
          elLatin.textContent = currentAxiom.latin;
          elLatin.style.display = '';
        } else {
          elLatin.textContent = '';
          elLatin.style.display = 'none';
        }

        // Flip
        isFlipped = true;
        flipper.classList.add('is-flipped');
        cardBack.setAttribute('aria-hidden', 'true');
        cardFront.setAttribute('aria-hidden', 'false');

        // After transition, sync height, show actions, show nudge if in consultation mode
        setTimeout(function () {
          syncFlipperHeight();
          actions.classList.add('is-visible');
          if (currentQuestion) {
            nudge.classList.add('is-visible');
          }
        }, 580);
      }

      // ----------------------------------------------------------------
      // Reset
      // ----------------------------------------------------------------
      function reset() {
        actions.classList.remove('is-visible');
        copyConfirm.classList.remove('is-visible');
        nudge.classList.remove('is-visible');

        // Restore natural height for face-down state
        flipper.style.height = '';

        isFlipped = false;
        flipper.classList.remove('is-flipped');
        cardBack.setAttribute('aria-hidden', 'false');
        cardFront.setAttribute('aria-hidden', 'true');
        currentAxiom = null;
      }

      // ----------------------------------------------------------------
      // Take This With You
      // ----------------------------------------------------------------
      function takeWithYou() {
        if (!currentAxiom) return;
        var prompt;
        if (currentQuestion) {
          prompt = buildConsultationPrompt(currentAxiom, currentQuestion);
        } else {
          prompt = buildReflectionPrompt(currentAxiom);
        }

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(prompt)
            .then(function () {
              console.log('Copied to clipboard:\n\n' + prompt);
              showCopyConfirm();
            })
            .catch(function () {
              console.log('Prompt:\n\n' + prompt);
              showCopyConfirm();
            });
        } else {
          console.log('Prompt:\n\n' + prompt);
          showCopyConfirm();
        }
      }

      function showCopyConfirm() {
        copyConfirm.classList.add('is-visible');
        setTimeout(function () {
          copyConfirm.classList.remove('is-visible');
        }, 2400);
      }

      // ----------------------------------------------------------------
      // Event listeners
      // ----------------------------------------------------------------
      cardBack.addEventListener('click', draw);

      cardBack.addEventListener('keydown', function (e) {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          draw();
        }
      });

      btnAgain.addEventListener('click', function () {
        reset();
        // If consultation mode, keep the question visible — just reset the card
      });

      btnTake.addEventListener('click', takeWithYou);

      questionForm.addEventListener('submit', function (e) {
        e.preventDefault();
        submitQuestion(questionInput.value);
      });

      questionReset.addEventListener('click', clearQuestion);

      // ----------------------------------------------------------------
      // THREE-CARD SPREAD
      // ----------------------------------------------------------------
      var spreadDisplay     = document.getElementById('spread-display');
      var spreadNudge       = document.getElementById('spread-nudge');
      var spreadActions     = document.getElementById('spread-actions');
      var btnSpreadAgain    = document.getElementById('btn-spread-again');
      var btnSpreadTake     = document.getElementById('btn-spread-take');
      var spreadCopyConfirm = document.getElementById('spread-copy-confirm');

      // Spread state
      var spreadCards   = [null, null, null];   // axiom objects
      var spreadRevealed = [false, false, false];
      var spreadNextReveal = 0;                 // which card is next to flip (0,1,2)

      // DOM refs for the 3 slots
      var spreadSlots    = document.querySelectorAll('.spread-slot');
      var spreadFlippers = [
        document.querySelector('[data-spread-flipper="0"]'),
        document.querySelector('[data-spread-flipper="1"]'),
        document.querySelector('[data-spread-flipper="2"]')
      ];
      var spreadBacks = [
        document.querySelector('[data-spread-back="0"]'),
        document.querySelector('[data-spread-back="1"]'),
        document.querySelector('[data-spread-back="2"]')
      ];

      // ----------------------------------------------------------------
      // Phase-weighted random selection
      // ----------------------------------------------------------------
      function pickWeighted(preferredPrefixes, exclude) {
        var preferred = [];
        var fallback  = [];

        for (var i = 0; i < axioms.length; i++) {
          var ax = axioms[i];
          // Skip already-drawn axioms
          var dominated = false;
          for (var j = 0; j < exclude.length; j++) {
            if (exclude[j] && exclude[j].id === ax.id && exclude[j].text === ax.text) {
              dominated = true;
              break;
            }
          }
          if (dominated) continue;

          var inPreferred = false;
          for (var k = 0; k < preferredPrefixes.length; k++) {
            if (ax.phase && ax.phase.indexOf(preferredPrefixes[k]) === 0) {
              inPreferred = true;
              break;
            }
          }

          if (inPreferred) {
            preferred.push(ax);
          }
          fallback.push(ax);
        }

        var pool = preferred.length > 0 ? preferred : fallback;
        if (pool.length === 0) return null;
        return pool[Math.floor(Math.random() * pool.length)];
      }

      // ----------------------------------------------------------------
      // Draw three cards with phase weighting
      // ----------------------------------------------------------------
      function drawSpreadCards() {
        var drawn = [];

        // Card 1: Phase I or Phase II
        var c1 = pickWeighted(['Phase I', 'Phase II'], drawn);
        drawn.push(c1);

        // Card 2: Phase III
        var c2 = pickWeighted(['Phase III'], drawn);
        drawn.push(c2);

        // Card 3: Phase IV or The Thirteen Laws
        var c3 = pickWeighted(['Phase IV', 'The Thirteen Laws'], drawn);
        drawn.push(c3);

        return drawn;
      }

      // ----------------------------------------------------------------
      // Populate a spread card's front face
      // ----------------------------------------------------------------
      function populateSpreadCard(index, axiom) {
        if (!axiom) return;
        var el = function (attr) {
          return document.querySelector('[data-spread-' + attr + '="' + index + '"]');
        };

        el('id').textContent    = axiom.id;
        el('phase').textContent = axiom.phase;
        el('step').textContent  = buildStepLine(axiom);
        el('axiom').textContent = axiom.text;

        var latinEl = el('latin');
        if (axiom.latin && !axiom.id.startsWith('Law')) {
          latinEl.textContent = axiom.latin;
          latinEl.style.display = '';
        } else {
          latinEl.textContent = '';
          latinEl.style.display = 'none';
        }
      }

      // ----------------------------------------------------------------
      // Sync flipper height for a spread card
      // ----------------------------------------------------------------
      function syncSpreadFlipperHeight(index) {
        var front = document.querySelector('[data-spread-front="' + index + '"]');
        var flipper = spreadFlippers[index];
        if (front && flipper) {
          flipper.style.height = front.offsetHeight + 'px';
        }
      }

      // ----------------------------------------------------------------
      // Initialize spread (draw cards, reset state, set up slots)
      // ----------------------------------------------------------------
      function initSpread() {
        if (!axioms.length) {
          console.warn('Axioms not loaded yet.');
          return;
        }

        // Reset state
        spreadRevealed = [false, false, false];
        spreadNextReveal = 0;
        spreadNudge.classList.remove('is-visible');
        spreadActions.classList.remove('is-visible');
        spreadCopyConfirm.classList.remove('is-visible');

        // Draw three cards
        spreadCards = drawSpreadCards();

        // Populate all three fronts
        for (var i = 0; i < 3; i++) {
          populateSpreadCard(i, spreadCards[i]);

          // Reset flipper state
          spreadFlippers[i].classList.remove('is-flipped');
          spreadFlippers[i].style.height = '';

          // Reset back/front aria
          var back = document.querySelector('[data-spread-back="' + i + '"]');
          var front = document.querySelector('[data-spread-front="' + i + '"]');
          if (back) back.setAttribute('aria-hidden', 'false');
          if (front) front.setAttribute('aria-hidden', 'true');
        }

        // Set slot states: first is active, rest are locked
        updateSlotStates();
      }

      // ----------------------------------------------------------------
      // Update slot visual states based on reveal progress
      // ----------------------------------------------------------------
      function updateSlotStates() {
        for (var i = 0; i < 3; i++) {
          var slot = spreadSlots[i];
          slot.classList.remove('is-locked', 'is-active', 'is-revealed');

          if (spreadRevealed[i]) {
            slot.classList.add('is-revealed');
          } else if (i === spreadNextReveal) {
            slot.classList.add('is-active');
          } else {
            slot.classList.add('is-locked');
          }
        }
      }

      // ----------------------------------------------------------------
      // Reveal a spread card
      // ----------------------------------------------------------------
      function revealSpreadCard(index) {
        if (index !== spreadNextReveal) return;
        if (spreadRevealed[index]) return;

        var flipperEl = spreadFlippers[index];
        var back = document.querySelector('[data-spread-back="' + index + '"]');
        var front = document.querySelector('[data-spread-front="' + index + '"]');

        // Flip it
        flipperEl.classList.add('is-flipped');
        if (back) back.setAttribute('aria-hidden', 'true');
        if (front) front.setAttribute('aria-hidden', 'false');
        spreadRevealed[index] = true;
        spreadNextReveal = index + 1;

        // Sync height and update states after flip transition
        setTimeout(function () {
          syncSpreadFlipperHeight(index);
          updateSlotStates();

          // If all three revealed, show nudge + actions
          if (spreadRevealed[0] && spreadRevealed[1] && spreadRevealed[2]) {
            setTimeout(function () {
              spreadNudge.classList.add('is-visible');
              spreadActions.classList.add('is-visible');
            }, 200);
          }
        }, 580);
      }

      // ----------------------------------------------------------------
      // Build spread prompt
      // ----------------------------------------------------------------
      function buildSpreadPrompt() {
        if (!spreadCards[0] || !spreadCards[1] || !spreadCards[2]) return '';
        var q = currentQuestion || '';

        var prompt =
          'You are working on: ' + q + '\n\n' +
          'Three principles for your situation:\n\n' +
          'DIVINATIO (Assessment):\n' +
          '"' + spreadCards[0].text + '"\n' +
          buildAttribution(spreadCards[0]) + '\n\n' +
          'POTESTAS (Action):\n' +
          '"' + spreadCards[1].text + '"\n' +
          buildAttribution(spreadCards[1]) + '\n\n' +
          'JUDICIUM (Integration):\n' +
          '"' + spreadCards[2].text + '"\n' +
          buildAttribution(spreadCards[2]) + '\n\n' +
          'Use these three principles as a framework:\n' +
          '- What does the first reveal about your situation?\n' +
          '- What does the second suggest about how to proceed?\n' +
          '- What does the third warn you to watch for?\n\n' +
          'Begin.';

        return prompt;
      }

      // ----------------------------------------------------------------
      // Spread: Take This With You
      // ----------------------------------------------------------------
      function spreadTakeWithYou() {
        var prompt = buildSpreadPrompt();
        if (!prompt) return;

        if (navigator.clipboard && navigator.clipboard.writeText) {
          navigator.clipboard.writeText(prompt)
            .then(function () {
              console.log('Copied spread prompt to clipboard:\n\n' + prompt);
              showSpreadCopyConfirm();
            })
            .catch(function () {
              console.log('Spread prompt:\n\n' + prompt);
              showSpreadCopyConfirm();
            });
        } else {
          console.log('Spread prompt:\n\n' + prompt);
          showSpreadCopyConfirm();
        }
      }

      function showSpreadCopyConfirm() {
        spreadCopyConfirm.classList.add('is-visible');
        setTimeout(function () {
          spreadCopyConfirm.classList.remove('is-visible');
        }, 2400);
      }

      // ----------------------------------------------------------------
      // Spread: Reset
      // ----------------------------------------------------------------
      function resetSpread() {
        spreadActions.classList.remove('is-visible');
        spreadNudge.classList.remove('is-visible');
        spreadCopyConfirm.classList.remove('is-visible');

        // Reset flippers
        for (var i = 0; i < 3; i++) {
          spreadFlippers[i].classList.remove('is-flipped');
          spreadFlippers[i].style.height = '';
          var back = document.querySelector('[data-spread-back="' + i + '"]');
          var front = document.querySelector('[data-spread-front="' + i + '"]');
          if (back) back.setAttribute('aria-hidden', 'false');
          if (front) front.setAttribute('aria-hidden', 'true');
        }

        spreadCards = [null, null, null];
        spreadRevealed = [false, false, false];
        spreadNextReveal = 0;

        // Re-init with new cards
        setTimeout(function () {
          initSpread();
        }, 400);
      }

      // ----------------------------------------------------------------
      // Spread event listeners — card click/keyboard
      // ----------------------------------------------------------------
      for (var s = 0; s < spreadBacks.length; s++) {
        (function (idx) {
          spreadBacks[idx].addEventListener('click', function () {
            revealSpreadCard(idx);
          });
          spreadBacks[idx].addEventListener('keydown', function (e) {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              revealSpreadCard(idx);
            }
          });
        })(s);
      }

      btnSpreadAgain.addEventListener('click', resetSpread);
      btnSpreadTake.addEventListener('click', spreadTakeWithYou);

      // Expose drawSpread for Task 6 mode selector to call
      window.drawSpread = function () {
        initSpread();
      };

    })();
  </script>

</body>
</html>
